Number.prototype.isNan||(Number.isNaN=Number.isNaN||function(e){return e!=e}),Number.prototype.isInteger||(Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),(e=>{e.melidata_namespace={utils:{},session:{},config:{melidata_internal_admin_public_url:"https://api.mercadolibre.com/tracks/internal_admin",melidata_internal_admin_url:"https://melidata.adminml.com/tracks",melidata_internal_admin_url_test_url:"https://melidata-test.adminml.com/tracks",melidata_api_url:"https://api.mercadolibre.com/melidata/tracks",melidata_pixel_url:"https://api.mercadolibre.com/pixel.gif",retry_on_error_time:1e3,retry_on_error_limit:5,log_level:"enabled",enable_to_send:!0,http_retry_status_codes:[500,420,429]},test_env:!1},e.melidata_namespace.configure=function(e,t){e&&void 0!==t&&(this.config[e]=t)}})(window.inDapIF?window.parent:window.top),(r=>{r.melidata_namespace.utils={isWebkitContext:function(){var e=r.MobileWebKit;return void 0!==e&&!(void 0===e)},getUserAgent:function(){return navigator.userAgent},getCookieValue:function(e){for(var t,i,o=r.document.cookie.split(";"),n=0;n<o.length;n+=1)if(t=o[n].substr(0,o[n].indexOf("=")),i=o[n].substr(o[n].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))===e)return unescape(i)},setCookie:function(e,t,i,o,n,a){n=n||"/",o=o&&";domain="+o;var s=new Date;switch(a){case"d":s.setTime(s.getTime()+24*i*60*60*1e3);break;case"h":s.setTime(s.getTime()+60*i*60*1e3);break;case"m":s.setTime(s.getTime()+60*i*1e3);break;case"s":s.setTime(s.getTime()+1e3*i);break;default:s.setTime(s.getTime()+i)}a=e+"="+t+";"+("expires="+s.toUTCString())+";path="+n+o;"localhost"!==r.location.hostname&&(a+=";Secure;SameSite=None"),r.melidata_namespace.test_env&&console.log("setting cookie",a),r.document.cookie=a},isMshopsContext:function(e={}){var t=e.track||r.melidata_namespace.actual_track,i=e.domain||r.location.hostname,e=e.path||r.location.pathname||"";return!(!t||!t.application||t.application.business!==this.getBusinesses().mercadoshops)||!!(i.match(/(\.|^)mercadoshops\./g)||e.includes("/gz/checkout/")&&"true"===sessionStorage.getItem("onMshops")||e.match(/\/gz\/checkout\/buy(ing)?-ms/i))},setCookieForMshops:function(e){var t=r.location.hostname;r.melidata_namespace.utils.setCookie("_d2id_mshops",e,1095,t,"/","d")},mshopsDataHttp:function(){var e=r.location.pathname||"";if(e.includes("/gz/checkout/")||e.match(/\/gz\/checkout\/buy(ing)?-ms/i))return r.melidata_namespace.actual_track.platform.http.cookies},getBasicUserData:function(){var e={},t=this.getUidData(),i=this.getCookieValue("orguseridp"),o=this.getCookieValue("orgnickp"),o=o&&"0"!=o;return t&&(e.uid=t),i&&o&&(e.user_id=i),e},getUidData:function(){var e=this.getCookieValue("_d2id");return e=e&&e.replace("-n","")},uuid:function(){var i,e;return"function"==typeof String.prototype.replace?(i=Date.now(),r.performance&&"function"==typeof r.performance.now&&(i+=r.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===e?t:11&t).toString(16)})):((e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)})()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()},getApplicationInfo:function(){return{version:"UNKNOWN",business:this.getBusiness(r.location.hostname,r.location.pathname),site_id:this.getSiteId(r.location.hostname),sdk_version:this.getSdkVersion(),technologies:[]}},getBusiness:function(e,t){var i;return e.match(/envios(\.|^)mercadoli(v|b)re\./g)?i="mercadoenvios":e.match(/ads(\.|^)mercadoli(v|b)re\./g)?i="mercadoads":this.isMshopsContext({domain:e,path:t})?i="mercadoshops":e.match(/(\.|^)mercadoli(v|b)re\./g)?i="mercadolibre":e.match(/(\.|^)mercadopago\./g)?i="mercadopago":e.match(/(\.|^)mercadoclics\./g)?i="mercadoclics":e.match(/(\.|^)tucarro\./g)?i="tucarro":e.match(/(\.|^)tumoto\./g)?i="tumoto":e.match(/(\.|^)tuinmueble\./g)?i="tuinmueble":e.match(/(\.|^)metroscubicos\./g)?i="metroscubicos":e.match(/(\.|^)portalinmobiliario\./g)&&(i="portalinmobiliario"),i||"UNKNOWN"},getSiteId:function(e){var t;return e.match(/\.com\.ar$/)?t="MLA":e.match(/\.com\.br$/)?t="MLB":e.match(/\.com\.co$/)?t="MCO":e.match(/\.co\.cr$/)?t="MCR":e.match(/\.cl$/)||e.match(/(\.|^)portalinmobiliario\.com$/g)?t="MLC":e.match(/\.com\.do$/)?t="MRD":e.match(/\.com\.ec$/)?t="MEC":e.match(/\.com\.mx$/)||e.match(/(\.|^)metroscubicos\.com$/g)?t="MLM":e.match(/\.com\.pa$/)?t="MPA":e.match(/\.pt$/)?t="MPT":e.match(/\.com.uy$/)?t="MLU":e.match(/\.com.ve$/)?t="MLV":e.match(/\.com.bo$/)?t="MBO":e.match(/\.com.hn$/)?t="MHN":e.match(/\.com.gt$/)?t="MGT":e.match(/\.com.ni$/)?t="MNI":e.match(/\.com.py$/)?t="MPY":e.match(/\.com.pe$/)?t="MPE":e.match(/\.com.sv$/)?t="MSV":e.match(/global-selling\.mercadolibre\.com$/)&&(t=this.getCookieValue("cbtSiteId").substring(0,3)),t||"UNKNOWN"},getTimeZone:function(e){return this.pad(100*-e.getTimezoneOffset()/60,4,!0)},getDeviceInfo:function(){function t(e,t){return e.test(t)}function e(e){e=e||navigator.userAgent,this.apple={phone:t(i,e),ipod:t(o,e),tablet:t(n,e),device:t(i,e)||t(o,e)||t(n,e)},this.android={phone:t(a,e),tablet:!t(a,e)&&t(s,e),device:t(a,e)||t(s,e)},this.other={blackberry:t(r,e),opera:t(c,e),windows:t(l,e),firefox:t(u,e),device:t(r,e)||t(c,e)||t(l,e)||t(u,e)},this.seven_inch=t(d,e),this.any=this.apple.device||this.android.device||this.other.device||this.seven_inch}f=window,i=/iPhone/i,o=/iPod/i,n=/iPad/i,a=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,s=/Android/i,r=/BlackBerry/i,c=/Opera Mini/i,l=/IEMobile/i,u=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,d=RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),(f.isMobile=new e).Class=e;var i,o,n,a,s,r,c,l,u,d,m,p,h,f={resolution_height:screen.availHeight,resolution_width:screen.availWidth,platform:"/web/desktop"};return isMobile.any&&(isMobile.android.device?(m="android",p=isMobile.android):isMobile.apple.device&&(m="apple",p=isMobile.apple),p&&m&&(Object.keys(p).forEach(function(e){"device"!==e&&p[e]&&(h=e)}),f.vendor=m,f.device_type=h),f.platform="/web/mobile"),f},getBasicHttpData:function(){return{http_referer:r.document.referrer.split("?")[0],http_url:r.document.URL.split("?")[0],utm:this.parseUtm(),external_click_id:this.parseClickId(),intersection_observer_supported:this.isIntersectionObserverSupported(),cookies:this.mshopsDataHttp()}},getD2idFromQueryParams:function(){try{var e=decodeURIComponent(r.location.href).match(/_d2id=([^&]*)/i);return e&&e.length?(e=e[1]&&e[1].substr(0,36)).length<36?null:e:null}catch(e){return null}},getSdkVersion:function(){return{js_version:"0.6.21-rc.0"}},parseUtm:function(){var e=r.document.location.search,e=this.parseQueryStrings(e);return{utm_source:e.utm_source,utm_medium:e.utm_medium,utm_campaign:e.utm_campaign,utm_term:e.utm_term,utm_content:e.utm_content}},parseClickId:function(){var e,t,i=r.document.location.search,i=this.parseQueryStrings(i),o={gclid:i.gclid,fbclid:i.fbclid,msclkid:i.msclkid,gclsrc:i.gclsrc,wbraid:i.wbraid,gbraid:i.gbraid,twclid:i.twclid,ttclid:i.ttclid,dclid:i.dclid};for(e in o)if(o[e])return(t={})[e]=o[e],t},getExperimentsFromHash:function(e){try{for(var t=e.split("&"),i={},o="variant_",n=0;n<t.length;n+=1){var a,s,r=t[n].split("=");r&&2===r.length&&r[0].startsWith(o)&&!isNaN(parseInt(r[1]))&&(a=r[0].replace(o,""),s=r[1],i[a]=s)}return i}catch(e){return{}}},parseQueryStrings:function(e){try{for(var t={},i=(e="?"===e.charAt(0)?e.substr(1):e).split("&"),o=0;o<i.length;o++){var n=(s=i[o]).split("="),a=n[0],s=n[1];s=(s=decodeURIComponent(s)).replace(/\+/g," "),t[a]=s}return t}catch(e){return{}}},isIntersectionObserverSupported:function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype},pad:function(e,t,i){var o,n,a="";for(e<0?(a+="-",e=-e):i&&(a+="+"),o=String(e),n=0;n<t-o.length;n+=1)a+=0;return a+o},dateISOFormat:function(e){return e.getFullYear()+"-"+this.pad(e.getMonth()+1,2)+"-"+this.pad(e.getDate(),2)+"T"+this.pad(e.getHours(),2)+":"+this.pad(e.getMinutes(),2)+":"+this.pad(e.getSeconds(),2)+"."+this.pad(e.getMilliseconds(),2)+this.pad(100*-e.getTimezoneOffset()/60,4,!0)},dateMillis:function(e){return e.getTime()},isIS0Date:function(e){return!!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e)&&new Date(e).toISOString()===e},getCurrentSite:function(e,t){var i="",o=e[this.getSiteId(r.location.hostname)],n=r.melidata_namespace.test_env;return!o&&t?r.location.pathname.split("/").forEach(function(t){Object.keys(e).forEach(function(e){i||e.toLowerCase()!=t||(n&&console.log("site %s found in path",e),i=e)})}):i=this.getSiteId(r.location.hostname),i},getDomain:function(e){e=(e=e.replace("www.","")).split("."),e=("com"===e[e.length-2]||"co"===e[e.length-2]?e.slice(-3):e.slice(-2)).join(".");return e},getBusinesses:function(){return{mercadolibre:"mercadolibre",mercadopago:"mercadopago",mercadoshops:"mercadoshops",tucarro:"tucarro",tumoto:"tumoto",portalinmobiliario:"portalinmobiliario",metroscubicos:"metroscubicos",tuinmueble:"tuinmueble",mercadoads:"mercadoads"}},getSites:function(){var e=this.getBusinesses();return{MBO:{suffix:"com.bo",replicationBusinesses:[]},MCO:{suffix:"com.co",replicationBusinesses:[e.mercadopago,e.tucarro]},MCR:{suffix:"co.cr",replicationBusinesses:[]},MEC:{suffix:"com.ec",replicationBusinesses:[]},MGT:{suffix:"com.gt",replicationBusinesses:[]},MHN:{suffix:"com.hn",replicationBusinesses:[]},MLA:{suffix:"com.ar",replicationBusinesses:[e.mercadopago]},MLB:{suffix:"com.br",replicationBusinesses:[e.mercadopago],domainBusinessExceptions:{}},MLC:{suffix:"cl",replicationBusinesses:[e.mercadopago,e.portalinmobiliario],domainBusinessExceptions:{}},MLM:{suffix:"com.mx",replicationBusinesses:[e.mercadopago],domainBusinessExceptions:{}},MLU:{suffix:"com.uy",replicationBusinesses:[e.mercadopago]},MLV:{suffix:"com.ve",replicationBusinesses:[e.tucarro]},MNI:{suffix:"com.ni",replicationBusinesses:[]},MPA:{suffix:"com.pa",replicationBusinesses:[]},MPE:{suffix:"com.pe",replicationBusinesses:[e.mercadopago]},MPY:{suffix:"com.py",replicationBusinesses:[]},MRD:{suffix:"com.do",replicationBusinesses:[]},MSV:{suffix:"com.sv",replicationBusinesses:[]}}},getBrowserInfo:function(){return navigator.userAgentData&&"function"==typeof navigator.userAgentData.getHighEntropyValues?navigator.userAgentData.getHighEntropyValues(["architecture","model","platformVersion","fullVersionList"]).then(t=>{var o={browser:{},device:{}};if(t.fullVersionList&&0!==t.fullVersionList.length){var n=t.fullVersionList.filter(e=>e.brand&&!e.brand.includes("Not")&&!e.brand.includes("Brand"));let i=["Google Chrome","Safari","Firefox","Microsoft Edge","Opera","Brave","Vivaldi","Chromium"],e=null;for(let t=0;t<i.length;t++){var a=n.find(e=>e.brand===i[t]);if(a){o.browser.browser_name=a.brand,e=a.version;break}}!o.browser.browser_name&&t.brands[0]&&(o.browser.browser_name=t.brands[0].brand,e=t.brands[0].version),null!==e&&(e=e.split(".").slice(0,3).join("."),o.browser.browser_version=e),t.model&&""!==t.model&&(o.device.device_name=t.model),t.platform&&""!==t.platform&&(o.device.os_name=t.platform),t.platformVersion&&""!==t.platformVersion&&(o.device.os_version=t.platformVersion)}return o}):new Promise(e=>e({}))},postErrorToNewRelic:function(e){console.error("Error caught in safeExecute:",e);try{parent.newrelic&&parent.newrelic.noticeError(e,{errorSource:"melidata-js-sdk"})}catch(e){console.error("Error posting to newRelic from Melidata:",e)}}}})(window.inDapIF?window.parent:window.top),(s=>{var t,i,o,n,a,r,c=s.melidata_namespace.utils,l=s.melidata_namespace.test_env,u=c.getCookieValue("_d2id"),e=c.getCookieValue("backup_d2id"),d=c.getBusiness(s.location.hostname,s.location.pathname),m=c.getBusinesses(),p="com"===s.location.hostname.substr(-3)&&(d===m.mercadolibre||d===m.mercadopago);function h(e,t,i,o,n){t="https://melidata."+e+"/pixel.gif?name="+t+"&value="+i+"&max_age="+24*o*60*60+"&domain=."+e;return n&&(t+="&path="+n),t}function f(t,i,o,n,a){s.document.requestStorageAccessFor("https://melidata."+t).then(function(){var e;e=h(e=t,i,o,n,a),s.fetch(e,{keepalive:!0,credentials:"include"}).catch(function(e){l&&console.log("fetch cookie replication failed:",e)}),l&&console.log("setting cookie through fetch first-party-sets cookies",e)},function(e){console.log("requestStorageAccessFor error:"+e)})}function _(){n("mercadolibre.com","_d2id",u,a,"/");var e="/jms/"+i.toLowerCase()+"/";n("mercadoli"+("MLB"===i?"v":"b")+"re.com","_d2id",u,a,e),-1<o.replicationBusinesses.indexOf(m.mercadopago)&&(e="/"+i.toLowerCase()+"/",n("mercadopago.com","_d2id",u,a,e)),o.replicationBusinesses.forEach(function(e){let t=e+"."+o.suffix,i;o.domainBusinessExceptions&&(i=o.domainBusinessExceptions[e])&&(t=i),e!=d||p?n(t,"_d2id",u,a):c.setCookie("_d2id",u,a,"."+t,"/","d")})}c.isWebkitContext()||(u?38!==u.length||"-n"!==u.substring(u.length-2)||p?l&&console.log("_d2id already replicated (without -n) or length != 38"):(u=e||u.substr(0,36),(t=c.getSites()).MLC.domainBusinessExceptions[m.portalinmobiliario]="portalinmobiliario.com",t.MLB.domainBusinessExceptions[m.mercadolibre]="mercadolivre.com.br",Object.keys(t).forEach(function(e){t[e].replicationBusinesses.push(m.mercadolibre)}),i=c.getCurrentSite(t,p),o=t[i],e=s.navigator.permissions&&"requestStorageAccessFor"in document,n=e?f:function(e,t,i,o,n){var a=new Image,e=h(e,t,i,o,n);a.src=e,l&&console.log("setting cookie through gif",e)},o&&-1<o.replicationBusinesses.indexOf(d)?(a=1095,e?(r=function(){s.document.removeEventListener("click",r,{capture:!0}),s.document.removeEventListener("keydown",r),_()},s.navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:"https://mercadolibre.com"}).then(function(e){"granted"===e.state&&_(),"prompt"===e.state&&(s.document.addEventListener("click",r,{capture:!0}),s.document.addEventListener("keydown",r))})):_()):console.warn("could not detect melidata site replication rule for current domain")):l&&console.log("_d2id cookie not found"))})(window.inDapIF?window.parent:window.top),(e=>{var t=e.melidata_namespace.utils,i=e.melidata_namespace.test_env,o=/.*(\.?mercado[^\/]+)\/?.*/.exec(e.location.hostname),n=t.getBusiness(e.location.hostname,e.location.pathname),n="com"===e.location.hostname.substr(-3)&&("mercadolibre"===n||"mercadopago"===n),a=e.document.location.search,e=e.melidata_namespace.utils.parseQueryStrings(a),a="/",s=t.getCookieValue("_d2id");(e=e.forced_d2id)&&e.endsWith("-f")&&o?(o=o[1],n&&(n=t.getCurrentSite(t.getSites(),n),o.startsWith("mercadoli"+("MLB"===n?"v":"b")+"re")&&(a="/jms/"+n.toLowerCase()+"/"),o.startsWith("mercadopago"))&&(a="/"+n.toLowerCase()+"/"),s&&!s.endsWith("-f")&&t.setCookie("backup_d2id",s,7,"."+o,a,"d"),t.setCookie("_d2id",e,1,"."+o,a,"d")):i&&console.log("forced_d2id not valid")})(window.inDapIF?window.parent:window.top),(e=>{var t=e.melidata_namespace.utils,i=e.melidata_namespace.test_env,o=/.*(\.?mercado[^\/]+)\/?.*/.exec(e.location.hostname),n=t.getBusiness(e.location.hostname,e.location.pathname),n="com"===e.location.hostname.substr(-3)&&("mercadolibre"===n||"mercadopago"===n),a=e.document.location.search,e=e.melidata_namespace.utils.parseQueryStrings(a),a="/",s=t.getCookieValue("_d2id");(e=e.mshops_d2id)&&e.endsWith("-s")&&o?(o=o[1],n&&(n=t.getCurrentSite(t.getSites(),n),o.startsWith("mercadoli"+("MLB"===n?"v":"b")+"re")&&(a="/jms/"+n.toLowerCase()+"/"),o.startsWith("mercadopago"))&&(a="/"+n.toLowerCase()+"/"),s&&!s.endsWith("-s")&&t.setCookie("backup_d2id",s,7,"."+o,a,"d"),t.setCookie("_d2id",e,10,"."+o,a,"m")):i&&console.log("mshops_d2id not valid")})(window.inDapIF?window.parent:window.top),(e=>{var t,i=e.melidata_namespace.utils,o=e.melidata_namespace.test_env,n=e.document.location.search;(n=e.melidata_namespace.utils.parseQueryStrings(n).mshops_mldataSessionId)?(t=/.*(\.?mercado[^s\/]+)\/?.*/.exec(e.location.hostname),e=e.location.hostname.replace("www",""),t&&(e=t[1]),i.setCookie("_mldataSessionId_mshops",n,30,"."+e,"/","m")):o&&console.log("mshops_mldataSessionId not valid")})(window.inDapIF?window.parent:window.top);let SESSION_ID_MAX_AGE=30,COOKIE_MAX_AGE_MINUTES="m";class SessionManagerService{constructor(e,t){this.cookieName="_mldataSessionId",this.sessionId=null,this.mldata=e.melidata_namespace.utils,this.uuid=t,this.isTestEnv="localhost"===e.location.hostname,this.currentBusiness=this.getCurrentBusiness(e),this.isLogin=this.checkIfLogin(e,this.currentBusiness),this.isMlDotCom="mercadolibre.com"===e.location.hostname&&"/"===e.location.pathname,this.d2id=this.mldata.getCookieValue("_d2id"),this.isTestEnv||(this.setCookieDomain(e),this.setCookieName(e))}getCurrentBusiness(e){return this.mldata.getBusiness(e.location.hostname,e.location.pathname)}checkIfLogin(e,t){return"com"===e.location.hostname.substr(-3)&&("mercadolibre"===t||"mercadopago"===t)&&"/jms/"===e.location.pathname.substring(0,5)}isUidCrossSitePropagated(){return!("-n"===this.d2id.substring(this.d2id.length-2))}getSessionId(){return null===this.sessionId&&(this.sessionId=this.mldata.getCookieValue(this.cookieName)),this.setOrRenewSessionId(),this.sessionId}setOrRenewSessionId(){this.isLogin&&this.isUidCrossSitePropagated()||this.isMlDotCom||(null==this.sessionId&&(this.sessionId=this.uuid()),this.isTestEnv?this.mldata.setCookie(this.cookieName,this.sessionId,SESSION_ID_MAX_AGE,"","/",COOKIE_MAX_AGE_MINUTES):this.mldata.setCookie(this.cookieName,this.sessionId,SESSION_ID_MAX_AGE,"."+this.cookieDomain,"/",COOKIE_MAX_AGE_MINUTES))}setCookieDomain(e){this.cookieDomain=this.mldata.getDomain(e.location.hostname)}setCookieName(e){"mercadoshops"===this.mldata.getBusiness(e.location.hostname,e.location.pathname)&&(this.cookieName="_mldataSessionId_mshops")}}(window.inDapIF?window.parent:window.top).melidata_namespace.session={newSessionManager:function(e,t){return new SessionManagerService(e,t)}},(r=>{void 0!==r.document.addEventListener&&r.document.addEventListener("webkitvisibilitychange",function(){document.webkitHidden||r.melidata_namespace.sender.send_hidden()},!1);var e,o,c=r.melidata_namespace,l=(o=e=!1,window.XMLHttpRequest&&("withCredentials"in new window.XMLHttpRequest?(e=!0,new window.XMLHttpRequest):window.XDomainRequest&&(o=!(e=!1),new window.XDomainRequest)),e&&function(e){var t=new window.XMLHttpRequest,i=(o?(t.open(e.method,e.url),t.ontimeout=e.error,t.onerror=e.error,t.onload=function(){t&&(c.config.http_retry_status_codes.includes(t.status)||400===t.status||406===t.status)?e.error(t,t.responseText):e.success(t,t.responseText)}):(t.open(e.method,e.url,!0),t.onreadystatechange=function(){4===t.readyState&&(!t.response||c.config.http_retry_status_codes.includes(t.status)||400===t.status||406===t.status?e.error(t,t.responseText):e.success(t,t.responseText))}),e.headers);i&&Object.keys(i).forEach(function(e){t.setRequestHeader(e,i[e])}),t.send(e.data)});c.sender={user_agent_whitelist_app_track:["MercadoLibre-Android","MercadoLibre-iOS","MercadoPago-Android","MercadoPago-iOS"],shouldTrackSentFromWebViewInApp:function(e,t,i){for(var o=0;o<this.user_agent_whitelist_app_track.length;o++)if(0==e.indexOf(this.user_agent_whitelist_app_track[o])&&(void 0!==t||void 0!==i))return!0;return!1},sendTrackFromApp:function(e){var t,i,o,n;try{t=window.parent.MelidataCallback,i=window.parent.MobileWebKit}catch(e){return{}}void 0!==i?(o=function(){e.event_data.sent_from_webview=!0,e.event_data.fragment_from_webview=e.platform.fragment,i.executeNative({method:"track_melidata",args:e})},i.isConnected()?o():(n=function(e){i.removeEventListener("connect",n),o()},i.addEventListener("connect",n)),this.lastTrack=e):void 0!==t&&(e.event_data.sent_from_webview=!0,e.event_data.fragment_from_webview=e.platform.fragment,t.sendTrackFromWebView(JSON.stringify(e)))},onlyPixel:!1,send_queues:{melidata:[]},send_hidden_q:[],isBeaconSupported:function(){return"sendBeacon"in navigator&&"function"==typeof navigator.sendBeacon},sendTrackFromBrowser:function(e,t,i){c.utils.isMshopsContext({track:e})&&e.application.secured&&(e.application.secured=null),e.user.uid&&(e.user.uid=e.user.uid.replace("-s",""));var o=e.stream_name||t||"melidata",n=this;n.preQueue(e),this.send_queues[o]||(this.send_queues[o]=[]),(e.F?this.send_hidden_q:this.send_queues[o]).push(e),this.lastTrack=e,setTimeout(function(){var e=n.send_queues[o];n.send_queues[o]=[],n.doSend(e,o,i)},0)},send:function(e,t,i){var o,n,a=e.device.user_agent,s=c.utils.getD2idFromQueryParams()||c.utils.getCookieValue("_d2id_mshops");try{o=window.parent.MelidataCallback,n=window.parent.MobileWebKit}catch(e){return{}}s&&c.utils.isMshopsContext({track:e})?(c.utils.setCookieForMshops(s),e.user.uid=s,this.sendTrackFromBrowser(e,t,i)):a&&this.shouldTrackSentFromWebViewInApp(a,o,n)?(!e.stream_name&&t&&"MELIDATA"!==t.toUpperCase()&&(e.stream_name=t),this.sendTrackFromApp(e)):this.sendTrackFromBrowser(e,t,i)},send_hidden:function(){var t=this;setTimeout(function(){var e=t.send_hidden_q;t.send_hidden_q=[],t.doSend(e,null,!1)},0)},success:function(){},preQueue:function(e){void 0!==e.application&&(void 0===e.application.sdk_version||void 0!==e.application.sdk_version&&void 0===e.application.sdk_version.js_version)&&(void 0===e.application.sdk_version&&(e.application.sdk_version={}),e.application.sdk_version.js_version=c.utils.getSdkVersion().js_version)},doSend:function(t,i,o){if(void 0!==t&&0!==t.length){null===r.location.hostname.match(/(\.|^)mercadoli(v|b)re\.com$/g)&&null===r.location.hostname.match(/(\.|^)mercadopago\.com$/g)||t.forEach(function(e){var t;e.platform&&e.platform.http&&e.platform.http.cookies&&e.platform.http.cookies.hasOwnProperty("_d2id")&&((t=c.utils.getD2idFromQueryParams()||c.utils.getCookieValue("_d2id_mshops"))&&c.utils.isMshopsContext({track:e})?e.platform.http.cookies._d2id=t:e.platform.http.cookies._d2id=r.melidata_namespace.utils.getCookieValue("_d2id"))});var n={tracks:t},a=this;if(c.config.enable_to_send){var s=n.tracks[0].user;let e=!1;!(e=void 0!==s&&void 0!==s.user_tags&&-1<s.user_tags.indexOf("internal")?!0:e)&&c.test_env?(console.log("Detected test environment, not sending tracks"),t.forEach(function(e,t){a.catalogValidate(e),"enabled"==c.config.log_level&&console.log("Track Sent: "+r.JSON.stringify(e))}),this.success()):setTimeout(function(){a.doSendTrack(n,i,o)},0)}}},doSendTrack:function(n,e,t){var a=l,s=this,i=n.tracks[0].user,o=i&&i.user_tags&&-1<i.user_tags.indexOf("internal"),i=i&&i.user_tags&&-1<i.user_tags.indexOf("internal_public_site"),i=c.test_env?c.config.melidata_internal_admin_url_test_url:i?c.config.melidata_internal_admin_public_url:c.config.melidata_internal_admin_url,o=o?i:c.config.melidata_api_url,i=e&&"melidata"!==e?o.concat("/"+e):o;if(this.isBeaconSupported()&&t&&navigator.sendBeacon(i,JSON.stringify(n)))this.success();else if(a&&!this.onlyPixel)a({url:i,method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},data:JSON.stringify(n),tryCount:0,success:function(e,t){var t=JSON.parse(t),i=n.tracks.length;t&&t.failed_record_count&&1<=t.failed_record_count&&(i-=t.failed_record_count);for(var o=0;o<i;o++)n.tracks.shift();this.data=JSON.stringify(n),0===n.tracks.length?s.success(this):(this.tryCount++,this.tryCount<=c.config.retry_on_error_limit&&a(this))},error:function(e){c.config.http_retry_status_codes.includes(e.status)&&(this.tryCount++,this.tryCount<=c.config.retry_on_error_limit)&&a(this)}});else try{(new Image).src=c.config.melidata_pixel_url+"?q="+encodeURIComponent(r.JSON.stringify(n)),this.success()}catch(e){}},catalogValidate:function(e){var t=l;if(t&&!this.onlyPixel)t({url:"https://api.mercadolibre.com/melidata/catalog/validate",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(e),tryCount:0,success:function(e,t){console.log("Validation against catalog was "+JSON.parse(t).passed+", reason :"+JSON.parse(t).messages)},error:function(e,t){400===e.status?console.log("Validation against catalog was "+JSON.parse(t).passed+", reason :"+JSON.parse(t).messages):console.log("Cant connect to catalog")}});else try{(new Image).src=c.config.melidata_pixel_url+"?q="+encodeURIComponent(r.JSON.stringify(e)),this.success()}catch(e){}}}})(window.inDapIF?window.parent:window.top),(n=>{var a=n.melidata_namespace;function t(){var e=new Date;return{path:"",user:{},type:void 0,user_local_timestamp:a.utils.dateISOFormat(e),server_id:a.utils.uuid(),id:a.utils.uuid(),event_data:{},platform:{http:{}},application:{sdk_version:{}},device:{},experiments:{},created_hidden:!1}}function o(e,t,i){return l(i[e])?l(t)?i[e]=i[e].concat(t):i[e].push(t):"object"==typeof t?s(i[e],t):i[e]=t,this}function s(t,i){"object"==typeof i&&Object.keys(i).forEach(function(e){t[e]=i[e]})}function r(e){var t={},i=a.session.newSessionManager(n,a.utils.uuid),t=(0<M().length&&(t.fragment=M()),f(t,e),m(a.utils.getExperimentsFromHash(M()),e),window.location.search),t=(e&&e.type===a.track_types.VIEW&&(g({utm:a.utils.parseUtm(t)},e),v({external_click_id:a.utils.parseClickId(t)},e)),k({intersection_observer_supported:a.utils.isIntersectionObserverSupported()},e),y(a.utils.getSdkVersion(),e),S(i.getSessionId(),e),a.utils.getCookieValue("_d2id")),i=a.utils.getCookieValue("_mldataSessionId"),t=(t&&_({client_d2id:t},e),i&&_({client_session_id:i},e),{user_agent:navigator.userAgent}),i=(e.device.user_agent||x(t,e),a.utils.getUidData());i&&i!==e.user.uid&&(p({uid:i},e),delete e.application.secured.signature),e.id=a.utils.uuid()}function c(e,t,i){r(e),i=!(!i||!i.useBeacon)&&i.useBeacon,a.sender.send(e,t,i)}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}a.track_types={VIEW:"view",EVENT:"event",SHOW:"show",WATCH:"watch",ERROR:"error"},a.clean=function(){try{this.actual_track&&(this.actual_track.event_data={},this.actual_track.experiments={})}catch(e){a.utils.postErrorToNewRelic(e)}},a.add=function(e,t){try{return o(e,t,this.actual_track)}catch(e){return a.utils.postErrorToNewRelic(e),this.actual_track}},a.addTechnology=function(e){try{t=e,i=this.actual_track,"string"==typeof t&&(t=t.toLowerCase(),i.application.technologies.includes(t)||i.application.technologies.push(t))}catch(e){return a.utils.postErrorToNewRelic(e),this.actual_track}var t,i},a.send=function(e,t,i){try{var o={event_data:{},path:"",experiments:{},user:{}},n=(E(this.actual_track.event_data,o.event_data,[]),t&&(t.event_data?s(o.event_data,t.event_data):t.data&&s(o.event_data,t.data),t.experiments&&s(o.experiments,t.experiments),t.user&&s(o.user,t.user),o.path=t.path),a.cleanTrack());a.completeTrack(n,e,o),c(n,i,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.cleanAndSend=function(e,t,i){try{var o=a.cleanTrack();o.experiments={},o.experiments_timestamp=void 0,a.completeTrack(o,e,t),c(o,i,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.cleanTrack=function(){var e=t();try{E(this.actual_track,e,C)}catch(e){a.utils.postErrorToNewRelic(e)}return e},a.completeTrack=function(e,t,i){try{e.type=t,i&&(d(i.path,e),i.event_data?u(i.event_data,e):i.data&&u(i.data,e),i.experiments&&m(i.experiments,e),i.user)&&p(i.user,e)}catch(e){a.utils.postErrorToNewRelic(e)}},a.addToTrack=function(e,t,i){try{return o(e,t,i)}catch(e){return a.utils.postErrorToNewRelic(e),i}},a.sendTrack=function(e,t,i){try{e&&c(e,t,i)}catch(e){a.utils.postErrorToNewRelic(e)}},a.createViewTrack=function(e){try{T(e),e.type=a.track_types.VIEW}catch(e){a.utils.postErrorToNewRelic(e)}},a.createEventTrack=function(e){try{T(e),e.type=a.track_types.EVENT}catch(e){a.utils.postErrorToNewRelic(e)}},a.createWatchTrack=function(e){try{T(e),e.type=a.track_types.WATCH}catch(e){a.utils.postErrorToNewRelic(e)}},a.createShowTrack=function(e){try{T(e),e.type=a.track_types.SHOW}catch(e){a.utils.postErrorToNewRelic(e)}},a.createErrorTrack=function(e){try{T(e),e.type=a.track_types.ERROR}catch(e){a.utils.postErrorToNewRelic(e)}},a.fillTrack=function(t){try{var e,i,o,n=this.actual_track.user;p(n,t),x(a.utils.getDeviceInfo(),t),p(a.utils.getBasicUserData(),t),b(a.utils.getApplicationInfo(),t),h(a.utils.getBasicHttpData(),t),a.utils.getBrowserInfo().then(e=>{null!==e&&(w(e.browser,t),x(e.device,t))}),this.actual_track.application.secured&&(e={secured:this.actual_track.application.secured,sdk_version:this.actual_track.application.sdk_version},b(e,t),i={platform:this.actual_track.device.platform},x(i,t)),this.actual_track.user.user_id&&(o={user_id:this.actual_track.user.user_id},p(o,t))}catch(e){a.utils.postErrorToNewRelic(e)}},a.withData=function(e,t){try{u(e,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.withUserData=function(e,t){try{p(e,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.withApplicationData=function(e,t){try{b(e,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.withPath=function(e,t){try{d(e,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.withStream=function(e,t){try{i(e,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.withExperiments=function(e,t){try{m(e,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.withExperiment=function(e,t,i){try{var o;null!==e&&null!==t&&((o={})[e]=t,m(o,i))}catch(e){a.utils.postErrorToNewRelic(e)}},a.withSdkVersion=function(e,t){try{withSdkVersion(e,t)}catch(e){a.utils.postErrorToNewRelic(e)}},a.complete=r;var u=function(e,t){return s(t.event_data,e),this},d=function(e,t){return e&&(t.path=e),this},m=function(e,t){return s(t.experiments,e),this},i=function(e,t){return e&&(t.stream_name=e),this},p=function(e,t){return s(t.user,e),this},h=function(e,t){return s(t.platform.http,e),this},f=function(e,t){return s(t.platform,e),this},_=function(e,t){return t.platform.http.cookies?s(t.platform.http.cookies,e):t.platform.http.cookies=e,this},g=function(e,t){return s(t.platform.http,e),this},v=function(e,t){return s(t.platform.http,e),this},w=function(e,t){return s(t.platform.http,e),this},k=function(e,t){return s(t.platform.http,e),this},b=function(e,t){return s(t.application,e),this},y=function(e,t){return s(t.application.sdk_version,e),this},x=function(e,t){s(t.device,e)},S=function(e,t){return p({melidata_session_id:e},t),this},M=function(){var e=window.top||window.parent||window;try{return e.location?decodeURIComponent(e.location.hash.substr(1)):""}catch(e){return""}},T=function(e){e.event_data||(E(t(),e,C),e.event_data={},a.fillTrack(e))},C=["user_local_timestamp","id","type","event_data"];function E(e,t,i){for(var o in e)e.hasOwnProperty(o)&&i.indexOf(o)<0&&(t[o]=n.JSON.parse(n.JSON.stringify(e[o])))}})(window.inDapIF?window.parent:window.top),((e,t)=>{var i=e.melidata_namespace,o=[];for(null!=e[t]&&null!=e[t].q&&(o=e[t].q),e[t]=function(){var e=Array.prototype.shift.apply(arguments),t=Array.prototype.slice.call(arguments);i.actual_track||(i.actual_track={},i.createViewTrack(i.actual_track)),i[e].apply(i,t)};0<o.length;)e[t].apply(e[t],o.shift())})(window.inDapIF?window.parent:window.top,"melidata");